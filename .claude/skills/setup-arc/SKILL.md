---
name: setup-arc
description: 巻のシナリオアーク・キャラクターアークを設計する。Claudeが草案を生成し、設計者との対話でチェックリストを完成させてから執筆を解禁する。
---

# /setup-arc — アーク設計スキル

## 概要

巻単位のアーク設計を対話的に構築する。

設計者がテーマを持ち込み、Claudeが草案を生成し、Claudeが自らの仮定を問いとして可視化し、設計者が答えることで設計が確定する。全チェックリスト項目が完了するまでエピソード執筆は開始しない。

## 前提条件

- `story/premise.md`、`story/characters.md` が存在すること（`/setup-world` で生成）
- `story/plot-outline.md` があることが望ましい（なくても実行可）

## 中断復帰

`story/arc-design-progress.md` が存在する場合、前回の途中から再開する。存在しない場合は新規開始。

---

## 実行手順

### Step 0：初期化

**① 中断復帰チェック**

`story/arc-design-progress.md` を確認する。

- **存在する（未完了）** → チェックリストの現在状態を表示し「〇〇から再開します」と設計者に確認して Step A へ
- **存在する（LOCKED）** → 「アーク設計はすでに完了しています。改版しますか？」と確認。改版する場合は既存ファイルをバックアップしてから ② へ
- **存在しない** → ② へ

**② 新規 / 続巻の確認**

設計者に問う：

```
第何巻のアーク設計ですか？
  A. 第1巻（新規シリーズ）
  B. 続巻（第2巻以降）
```

**A. 新規の場合**
`story/premise.md`、`story/characters.md`、`story/plot-outline.md` を読み込む。Step A へ。

**B. 続巻の場合**
前巻のアークファイルの場所を問う：

```
前巻のアーク設計ファイルはどこにありますか？
（story/scenario-arc.md と story/character-arcs.md のパスを教えてください）
```

- **ファイルが存在する** → 前巻のアーク設計を読み込み、引き継ぎ事項を把握してから Step A へ
- **ファイルが存在しない / パスが不明** → 設計者に以下を依頼してから中断する：

```
続巻のアーク設計には前巻のアーク設計ファイルが必要です。
以下を用意してから /setup-arc を再実行してください：

  - story/scenario-arc.md（前巻のシナリオアーク）
  - story/character-arcs.md（前巻のキャラクターアーク）

ファイルが手元にない場合は、前巻のエピソードと handover-notes.md を
もとに手動で作成するか、/edit-story で作成できます。
```

---

### Step A：テーマの言語化

設計者にこの巻で探求したいテーマを問う。

- `story/premise.md` にテーマが記載されている場合はそれを提示し「この巻のテーマとして使いますか？修正や絞り込みはありますか？」と問う
- テーマは**一文の感情命題**に向かう補助として問う（「この巻を読み終えた読者が持ち帰る感情は何ですか？」）
- 続巻の場合は前巻のアークとの連続性を確認する（「前巻から引き継ぎたいもの・意図的に変えるものはありますか？」）

テーマが定まったら Step B へ。

---

### Step B：シナリオアーク草案生成

テーマをもとに `story/scenario-arc.md` の草案を生成する。

生成する内容：
1. 巻の感情命題（一文）
2. 三幕構成（話数範囲・フェーズ名・感情の方向）
3. 感情頂点（幕ごとに一つ）
4. 本巻で書かないことの宣言
5. エピソード役割マップ骨格（Step F で完成）

草案生成と同時に `story/arc-design-progress.md` を作成してチェックリストを初期化する。

---

### Step C：シナリオアークの問いと更新

草案を提示した後、Claudeは自分が仮定で埋めた箇所を **3〜5点** 特定し、設計者に問う。

**問いの形式：**

問いが複数ある場合は `問い1` `問い2` のように半角数字で番号を振る（丸数字 ①② は文字化けするため使わない）。

各問いは **選択肢5つ**を提示する形式を基本とする。設計者が選んで答えられるように具体的な案を並べる。

```
問い1　〇〇の展開はどのようなものが好みですか？
  A. （案1）
  B. （案2）
  C. （案3）
  D. （案4）
  E. （案5）
```

- 選択肢は互いに方向性が異なる案を並べる（似た案を並べない）
- 設計者が「どれでもない」と感じた場合に備え、自由記述も歓迎する旨を添える
- 問いは「私がここで迷う可能性がある」と判断した箇所だけに絞る。問いを無理に作らない

設計者が答えたら草案を更新し、チェックリストの該当項目にチェックを付ける。

**構造的完全性チェック（固定）：**
- [ ] 感情命題が一文で定義されている
- [ ] 三幕構成と各幕の感情の方向が決まっている
- [ ] 各幕に感情頂点が一つずつ指定されている
- [ ] 「本巻で書かないこと」が宣言されている

全項目にチェックが付くまで Step C のサイクルを繰り返す。完了したら Step D へ。

---

### Step D：キャラクターアーク草案生成

確定したシナリオアークをもとに `story/character-arcs.md` の草案を生成する。

`story/characters.md` に記載された登場キャラクターごとに：
1. アーク概要（一文）
2. 変容ステージ（状態・発動トリガー・協調するシナリオフェーズ）
3. 合流ポイント（他キャラクターとの遷移が交差するタイミング。一点に最大3キャラまで）
4. 意図的に未解決を保つ期間

---

### Step E：キャラクターアークの問いと更新

Step C と同様の手順でキャラクターアークに対して問いを立て、更新する。

問いの番号は `問い1` `問い2` のように半角数字を使う（丸数字 ①② は文字化けするため使わない）。
各問いは選択肢5つを提示する形式を基本とする（Step C と同じ形式）。

特に以下の点でClaudeは問いを立てやすい：
- キャラクターの変容トリガーとシナリオイベントが一致しているか
- 合流ポイントが特定の話に集中しすぎていないか
- 意図的未解決期間がシナリオアークの余韻の話と重なっているか

**追加チェック（固定）：**
- [ ] 主要キャラクター全員のアーク概要が定義されている
- [ ] 少なくとも1つの合流ポイントが設定されている
- [ ] 意図的未解決期間が明記されている

全項目にチェックが付くまで Step E のサイクルを繰り返す。完了したら Step F へ。

---

### Step F：エピソード役割マップ完成

シナリオアーク・キャラクターアークを踏まえて、各話の役割タグを確定する。

| タグ | 定義 |
|-----|------|
| **頂点** | 幕の感情的クライマックス。一つの主題に集中 |
| **助走** | 次の頂点に向けて緊張を高める |
| **余韻** | 頂点の感情を沈殿させる。未解決項目の処理禁止 |
| **転換** | 物語の方向を変える。新情報は一つだけ |
| **蓄積** | 世界観・関係性を積み上げる |

`story/scenario-arc.md` のエピソード役割マップを完成させる。

**チェック：**
- [ ] 全話に役割タグが割り当てられている
- [ ] 同一タグが3話以上連続していない（意図的な例外は備考に明記）

---

### Step G：設計者承認 → アーク設計ロック

全チェックリスト項目にチェックが付いたことを確認し、設計者に最終承認を求める。

```
アーク設計チェックリストが完成しました。

✅ 感情命題
✅ 三幕構成・感情頂点
✅ 書かないことの宣言
✅ キャラクターアーク（全キャラ）
✅ 合流ポイント・未解決期間
✅ エピソード役割マップ

承認しますか？（承認後、/write-episode が実行可能になります）
```

設計者が承認したら：
- `story/arc-design-progress.md` に「LOCKED」を記録
- 「`/write-episode 1` で執筆を開始できます」と通知

---

## 成果物

| ファイル | 内容 |
|---------|------|
| `story/scenario-arc.md` | 感情命題・三幕構成・感情頂点・書かないこと宣言・役割マップ |
| `story/character-arcs.md` | 各キャラクターの変容ステージ・合流ポイント・未解決期間 |
| `story/arc-design-progress.md` | チェックリスト状態（LOCKED で執筆解禁） |
