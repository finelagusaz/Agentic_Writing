# マルチエージェント執筆システム改善提案

**対象作品:** 灰色の魔導書と忘却の王国（全20話）  
**分析基盤:** 下読み所見・文体分析・グルーピング分析・終盤収束ルール検討  
**作成日:** 2026-02-28

---

## 概要

本提案は、全20話の通読と執筆システムの分析から導出した改善事項を、三つの階層に整理したものである。

- **第1層：物語設計（Story Architecture）** — 巻全体の感情設計と強度管理
- **第2層：状態遷移管理（State Transition Management）** — キャラクターとイベントの因果関係の追跡
- **第3層：実行制御（Execution Control）** — 文体ガイドライン・申し送り・終盤収束の改善

第1層が最上位の判断基準を提供し、第2層がその基準を因果構造として具体化し、第3層が各話の執筆時に参照する実行ルールとなる。現行システムには第3層しか存在しないため、第1層・第2層の欠如が第20話の品質低下の根本原因となっている。

---

## 第1層：物語設計（Story Architecture）

### 1-1. 巻の感情命題の定義

**問題:** 「この巻を読み終えた読者が持ち帰る感情」が定義されていない。そのため、何を書き何を捨てるかの最上位基準が存在しない。第20話が11個の未解決項目を同時に処理しようとしたのは、取捨選択の基準が不在だったためである。

**提案:** `premise.md` に以下を追加する。

```
## 巻の感情命題
この巻を読み終えた読者が感じるべき一つの感情を一文で定義する。
全ての取捨選択の最上位基準となる。

第1巻: 「空っぽだった人間が、失い続けてなお誰かの傍にいることを選ぶ」
```

この命題に直接貢献しない要素（ガルドの仲間の名前回復、セルジュの動機解明、首領の正体）は、どれだけ魅力的でも本巻の最終話からは外す。次巻の冒頭、または独立したエピソードで扱う。

**影響範囲:** editor の方針策定、申し送りのトリアージ、終盤収束ルールの判断基準すべてに波及する。

### 1-2. 幕ごとの感情頂点の指定

**問題:** 全20話の感情強度がほぼ均質で、「読者を揺らす話」と「読者を休ませる話」のメリハリがない。グループD（第11〜14話）が最高品質だったのは結果論であり、設計されたものではなかった。

**提案:** `plot-outline.md` に三幕それぞれの感情頂点を一つだけ指定する。

```
## 感情頂点
第一幕（1〜7話）: 第5話 — 蓮が初めて自分の意志で記憶を代償にする選択をする
第二幕（8〜14話）: 第14話 — 感情を失った蓮が「ありがとう」を平坦に言う
第三幕（15〜20話）: 第19話 — 蓮が消えかけ、仲間の声で踏みとどまる
```

頂点以外の話は、頂点より感情強度を下げなければならない。頂点に向かう話は「助走」として緊張を高め、頂点の直後の話は「余韻」として読者に感情を沈殿させる時間を与える。

### 1-3. 各話の役割タグ

**問題:** 各話が物語全体の中で何をする話なのかが不明確。申し送りが「未解決項目のリスト」であるため、毎話が同等の密度で情報を処理しようとする。

**提案:** `plot-outline.md` の各話に以下の役割タグを付与する。

| タグ | 定義 | 制約 |
|------|------|------|
| **助走** | 次の頂点に向けて緊張を高める | 情報開示は控えめ。新規伏線を仕込んでよい |
| **頂点** | 幕の感情的クライマックス | 一つの主題に集中。他の未解決項目は扱わない |
| **余韻** | 頂点の感情を沈殿させる | 未解決項目の処理禁止。キャラクターの反応だけを描く |
| **転換** | 物語の方向を変える | 新情報の開示は一つだけ |
| **蓄積** | 世界観・関係性を積み上げる | 日常描写を含む。戦闘は小規模 |

申し送りに「次話の役割タグ」を含めることで、執筆エージェントの方向性を制御する。「次話は余韻の話である」と書いてあれば、未解決項目が溜まっていても処理しようとしない。

---

## 第2層：状態遷移管理（State Transition Management）

### 2-1. キャラクター状態遷移の定義

**問題:** 現行システムは「何話で何が起きるか」（時間軸）は管理しているが、「なぜこのタイミングで起きるか」「それが各キャラクターにどう影響するか」（因果軸）を管理していない。第10話で情報を全部出したのは、因果的な準備が揃っているかの検証なしに、プロット上の到達点を消化しようとした結果である。

**提案:** `story/state-transitions.md` を新設し、各キャラクターの遷移経路を定義する。

```
## 蓮
空白 → 他者への依存 → 代償の自覚 → 感情喪失 → 意志による選択
       [トリガー: 仲間との   [トリガー: 自分の意志で  [トリガー: 大きな   [トリガー: 感情なき
        生活の蓄積]          記憶を差し出す]         記憶の代償行使]    状態で他者を選ぶ]

## ルナ  
寡黙な護衛 → 過去との接触 → 血筋の重圧 → 感情の決壊
            [トリガー: 身体が   [トリガー: 王家の    [トリガー: 蓮の消失
             ヴェルディアを      末裔と判明]         の危機]
             記憶している]
```

各遷移にはトリガー条件を明記する。トリガー条件が成立していなければ、editorはその遷移を起こす方針を立てられない。これにより「第10話で全部出す」のような設計ミスを防ぐ。

**到達点と合流ポイントは初期設計で固定し、中間状態と各話での進行度だけを1話ごとに更新可能とする。**

### 2-2. 合流ポイントの設計

**問題:** 複数キャラクターの遷移が交差する場面が事前に設計されていない。第14話が強力だったのは、蓮・ルナ・ガルドの遷移が一点で交差したからだが、それは偶然の産物だった。第20話が散漫だったのは、全員の遷移を同時に完了させようとして合流ポイントが乱立した結果である。

**提案:** `state-transitions.md` に合流ポイントを定義する。

```
## 合流ポイント
CP-1（第5話付近）: 蓮の「代償の自覚」× ガルドの「過去の片鱗」
  → 蓮が記憶を使う覚悟を決める場面で、ガルドが自身の喪失を重ねる

CP-2（第14話）: 蓮の「感情喪失」× ルナの「感情表出への助走」× ガルドの「個人的共感」
  → 感情を失った蓮の傍にルナが残る。ガルドが「逃げてもいい」と言う

CP-3（第19話）: 蓮の「意志による選択」× ルナの「感情の決壊」
  → 蓮が消えかけ、ルナの言葉で踏みとどまる
```

**一つの合流ポイントで交差させるのは最大3キャラクターまで。** 第20話の失敗は5人以上の遷移を一点に集中させたことにある。

### 2-3. 1話ごとの遷移図更新

**問題:** 固定プロットでは、執筆中に生まれた創発的な展開（第11話のガルドの「逃げてもいい」）を構造に反映できない。

**提案:** 各話の確定処理（finalization）時に、以下を更新する。

1. 各キャラクターの現在状態と、次の遷移トリガーまでの距離
2. 想定外の中間状態が生まれた場合、遷移経路への追加
3. 合流ポイントの到達見込みの再評価

editorの方針策定の起点を「次話で扱うべき未解決項目」から「次話で最も遷移トリガーに近いキャラクターは誰か」に変える。

---

## 第3層：実行制御（Execution Control）

### 3-1. 文体ガイドラインへのキャラクター台詞制約の追加

**問題:** 現行の `writing-guide.md` は地の文の制御に精密だが、台詞に関する制約がほぼない。地の文のガイドラインが厳密であるほど、台詞が「地の文で説明しきれなかった情報」の受け皿になる。後半でミレーヌが学者のように喋り、ルナの語数が増え、ガルドが内省的になったのは、文体ガイドラインが地の文だけを制御し、台詞の人格を別レイヤーで管理していなかったためである。

**提案:** `writing-guide.md` に「台詞のスタイルルール」セクションを追加する。

```markdown
## 台詞のスタイルルール

地の文の文体モードが変わっても、各キャラクターの台詞は以下の制約に従う。

### ルナ
- 一発話の上限: 15字。感情が高まる場面でも30字まで
- 主語を省略する。接続詞を使わない
- 蓮を呼ぶ際は名前か省略。「あなた」は使わない
- 理想モデル: 「一緒に、考える」「消えないで」

### ガルド
- 体感・行動の語彙で語る。抽象概念は具体例に置換する
- 「坊主」「嬢ちゃん」の呼称を崩さない
- 三百年の過去を語る際も、身体感覚を経由する
- 理想モデル: 「感情が消えたなら、また積み直せばいい」

### ミレーヌ
- 商取引・金融の比喩を一発話に最低一つ含める
- 技術的説明は「つまり商売で言えば」のフィルターを通す
- 皮肉のトーンを維持する
- 理想モデル: 「投資よ。人脈は最も利回りの良い資産なの」

### アッシュ
- 一人称「我」、蓮の呼称「小僧」を固定
- 一発話は原則20字以内
- 沈黙と頁の震えも「発話」として扱う
- 理想モデル: 「……昔の話だ」
```

加えて、**台詞と地の文の役割分担を明示する**。

```markdown
## 台詞と地の文の役割分担
- 一つの台詞で開示してよい設定情報は一つまで
- 複数の設定を説明する必要がある場合、異なるキャラクターの台詞に分散させるか、
  地の文の描写（移動・五感・身体反応）を挟んで分割する
- キャラクターの台詞が「設定説明」になっていないか、以下で検証する:
  そのキャラクターの理想モデルの口調で同じ内容を言えるか？　言えないなら書き直す
```

### 3-2. 申し送り事項へのトリアージ機構の導入

**問題:** 申し送りが「未解決項目の単調増加リスト」になっており、最終話に全項目が累積する。第20話の11項目同時処理は、「何を引き継ぐか」だけを管理し「何を捨てるか」を管理していない構造的欠陥の帰結である。

**提案:** 申し送り事項に寿命と優先度のフラグを付与する。

```markdown
## 申し送り分類
各項目に以下のいずれかを付与する:

- **[MUST-THIS]**: この話で扱わないと物語が破綻する
- **[MUST-VOL]**: 本巻内で決着が必要
- **[NEXT-VOL]**: 次巻送り可。引きとして残してよい
- **[AMBIENT]**: 雰囲気・奥行きのために存在。明示的な回収不要
```

終盤モード突入時に、editorが全未回収要素をこの四分類でトリアージする。最終話でACTIVEに昇格するのは `[MUST-THIS]` と `[MUST-VOL]` のみ。

**終盤収束ルールの変更2A項目12（全DEFERRED→ACTIVE強制昇格）は、トリアージ後の `[MUST-VOL]` のみに適用範囲を限定する。** 全件強制昇格は第20話の問題を再現する。

### 3-3. 終盤収束ルールの補強

**問題:** 提出された終盤収束ルールは「残り話数を可視化する」守りの仕組みとしては有効だが、二つの欠陥がある。(1) トリアージがない（3-2で対応）。(2) 終盤モードの判定が残り話数のみに依存し、想定話数のずれに対応できない。

**提案:**

**(a) 終盤モード判定への第二条件の追加**

```
終盤モード = (remaining_episodes ≤ 2) AND (クライマックス開始話を通過済み)
```

`plot-outline.md` にクライマックス開始話を定義しておき、物語がまだ第二幕にいる場合は残り話数が少なくても終盤モードに入らない。editorが想定話数自体を更新する余地を残す。

**(b) editorの視野拡大の義務化**

変更3Dの「残り全話の展開メモを更新してよい」を「更新しなければならない」に変更する。権限だけでは従来の3話先の習慣を変えない可能性がある。

**(c) 「書かないことリスト」の導入**

終盤モード時、editorは方針策定で「本話で扱わないこと」を明示的にリストアップする。書くべきことの計画だけでなく、書かないことの宣言をcurrent-direction.mdに記載し、authorとmanagerが参照する。

### 3-4. 文体ガイドライン変更時の影響制御

**問題:** 執筆途中でガイドラインを変更した際、変更が地の文だけでなく台詞の語彙・構文にまで浸透した。後半のガイドラインが「より詳細に、より情報量多く」に振れたことで、キャラクターの口調が均質化した。

**提案:**

**(a) ガイドライン変更の影響範囲の明示**

ガイドライン変更時に、変更が適用されるレイヤーを明記する。

```
## ガイドライン変更履歴
第14話以降:
  - 適用レイヤー: 地の文のみ
  - 変更内容: 感覚描写の密度を上げる。列挙を許容する
  - 非適用: キャラクター台詞の語彙・構文・語数制限
```

**(b) 台詞の不変性原則**

地の文のスタイルモードがどう変わっても、台詞のスタイルルール（3-1で定義）は変更しない。これをガイドラインに明記する。

---

## 提案間の依存関係

```
第1層（物語設計）
  1-1 巻の感情命題 ──────────→ 3-2 申し送りトリアージの判断基準
  1-2 幕の感情頂点 ──────────→ 1-3 各話の役割タグ
  1-3 各話の役割タグ ─────────→ 3-2 申し送りの「次話の役割」フィールド

第2層（状態遷移管理）
  2-1 キャラクター遷移 ────────→ 2-2 合流ポイント
  2-2 合流ポイント ──────────→ 1-2 感情頂点の具体化
  2-3 1話ごとの遷移更新 ────────→ editor の方針策定の起点変更

第3層（実行制御）
  3-1 台詞制約 ──────────────→ 3-4 ガイドライン変更の影響制御
  3-2 申し送りトリアージ ────────→ 3-3 終盤収束ルールの判断対象
  3-3 終盤収束ルール ─────────→ 既存の終盤収束ルール実装計画を補強
```

## 実装優先度

| 優先度 | 提案 | 理由 |
|--------|------|------|
| **最優先** | 1-1 巻の感情命題 | 他の全提案の判断基準。これがないと取捨選択が機能しない |
| **最優先** | 3-1 台詞制約 | 即座に品質向上が見込める。既存ガイドラインへの追記で実装可能 |
| **高** | 3-2 申し送りトリアージ | 終盤収束ルール実装前に導入すべき前提条件 |
| **高** | 2-1 キャラクター遷移 | 第二巻の執筆開始前に設計が必要 |
| **中** | 1-2 感情頂点 | 2-2と合わせてplot-outline.mdに反映 |
| **中** | 1-3 役割タグ | 1-2と連動。申し送りフォーマットの変更が必要 |
| **中** | 2-2 合流ポイント | 2-1の完了後に設計 |
| **中** | 3-3 終盤収束ルール補強 | 既存の実装計画への修正として反映 |
| **低** | 2-3 遷移更新 | finalization処理の拡張。2-1完了後に実装 |
| **低** | 3-4 影響制御 | ガイドライン変更が発生した際のルール。予防的措置 |

---

## 第1巻への適用（改稿指針）

上記提案を第1巻の改稿に遡及適用した場合の主要な変更点:

**構成の圧縮と再配置:**
- 第2〜3話を統合（野盗戦の中でガルドが登場）
- 第10話の情報開示を分割（ルナの血筋→第9話暗示、蓮の召喚→第15話判明）
- 第17〜20話を再構成（+1話でLeader開発。最終話は蓮・ルナ・アッシュの三者に集中）

**後回しにする要素:**
- ガルドの仲間の名前回復 → 第2巻冒頭（霧が晴れた荒野で墓標を見つける）
- セルジュの「ある一人の記憶」の正体 → 第2巻の主要伏線として温存
- 首領の正体と目的 → 第2巻で段階的に開示
- カインのその後 → 第2巻冒頭の状況説明で処理

**台詞の改修:**
- ミレーヌの後半台詞を商人の語彙に統一（「既知の四分類」→ 商売比喩で再表現）
- ルナの第20話台詞を圧縮（「蓮。忘れない。私が覚えてる。だから——消えないで」）
- ガルドの第19話台詞を身体感覚に寄せる（「三百年前かよ。……道理でどこにもいねえわけだ」）

**設定の明確化:**
- ガルドの三百年問題（なぜ生きているか）の説明を第8話または第15話に挿入
- ルナの紋章の具体的能力の段階的開示
- 記憶共有術式のコストとリスクの体系的定義
